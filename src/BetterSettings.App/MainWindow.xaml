<Window
    x:Class="BetterSettings.App.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:models="using:BetterSettings.App.Models">

    <Grid x:Name="Root" Background="{ThemeResource ApplicationPageBackgroundThemeBrush}" KeyDown="Root_KeyDown">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Search Box -->
        <Grid Grid.Row="0" Padding="16,16,16,8">
            <TextBox 
                x:Name="SearchBox"
                PlaceholderText="Search Windows settings..."
                Text="{x:Bind ViewModel.Query, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                FontSize="18"
                Padding="12,10"
                BorderThickness="0"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                CornerRadius="8" />
        </Grid>

        <!-- Results List -->
        <ListView 
            Grid.Row="1"
            x:Name="ResultsList"
            ItemsSource="{x:Bind ViewModel.Results, Mode=OneWay}"
            SelectedItem="{x:Bind ViewModel.SelectedResult, Mode=TwoWay}"
            SelectionMode="Single"
            Padding="8,0,8,8"
            IsItemClickEnabled="True"
            ItemClick="ResultsList_ItemClick">
            <ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                    <Setter Property="Padding" Value="8,6" />
                    <Setter Property="Margin" Value="0,2" />
                    <Setter Property="CornerRadius" Value="6" />
                </Style>
            </ListView.ItemContainerStyle>
            <ListView.ItemTemplate>
                <DataTemplate x:DataType="models:SearchResult">
                    <Grid Opacity="{x:Bind Opacity}" Padding="4,4">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="32" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <!-- Icon -->
                        <FontIcon 
                            Grid.Column="0"
                            Glyph="&#xE713;"
                            FontSize="16"
                            VerticalAlignment="Center"
                            Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}" />

                        <!-- Name and Category -->
                        <StackPanel Grid.Column="1" VerticalAlignment="Center" Spacing="2">
                            <TextBlock 
                                Text="{x:Bind Item.DisplayName}" 
                                FontSize="14"
                                FontWeight="SemiBold"
                                TextTrimming="CharacterEllipsis" />
                            <TextBlock 
                                Text="{x:Bind Item.Category}" 
                                FontSize="11"
                                Opacity="0.6"
                                TextTrimming="CharacterEllipsis" />
                        </StackPanel>

                        <!-- Availability indicator -->
                        <TextBlock 
                            Grid.Column="2"
                            Text="{x:Bind AvailabilityText}"
                            FontSize="11"
                            Opacity="0.5"
                            VerticalAlignment="Center" />
                    </Grid>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>

        <!-- Status Bar -->
        <Grid Grid.Row="2" Padding="16,8,16,12" Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <TextBlock 
                Grid.Column="0"
                x:Name="StatusText"
                Text="{x:Bind ViewModel.StatusMessage, Mode=OneWay}"
                FontSize="11"
                Opacity="0.7"
                VerticalAlignment="Center" />

            <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="16">
                <TextBlock FontSize="11" Opacity="0.5" VerticalAlignment="Center">
                    <Run Text="↑↓"/> Navigate
                </TextBlock>
                <TextBlock FontSize="11" Opacity="0.5" VerticalAlignment="Center">
                    <Run Text="↵"/> Open
                </TextBlock>
                <TextBlock FontSize="11" Opacity="0.5" VerticalAlignment="Center">
                    <Run Text="Esc"/> Hide
                </TextBlock>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
